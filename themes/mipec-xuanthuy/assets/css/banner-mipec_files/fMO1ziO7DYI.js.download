if (self.CavalryLogger) { CavalryLogger.start_js(["1wY8F"]); }

__d("EditComposerAttachment",["csx","cx","CSS","DOM","Event","JSXDOM","LitestandShareAttachment","Parent","Run","Style"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=null,j=null,k=null,l=null,m=null,n=0,o=null,p=null,q=!1,r=null,s=null,t=null,u=null;a=null;var v=null,w=0;c=null;var x=null,y=null,z=null,A=!1,B=null,C=15,D=250,E=70,F=100;d={init:function(d,e,f){__p&&__p();n=0;t=e;j=d;e=(f=b("DOM")).scry(j,"._2r3x")[0];w=t.length;m=b("Parent").bySelector(j,"._4tbq");y=f.scry(m,"._6m2")[0];B=f.scry(j,"._6m6")[0];o=f.scry(j,"._6m7")[0];if(o){d=b("DOM").scry(o,"._5cy7")[0];r=d&&d.firstChild?d.firstChild.nodeValue:""}var g=b("DOM").scry(e,"._3m6-")[0],h=b("DOM").scry(e,"._3c21")[0],s="_51cc",C="_59ap",E="_5cwb",G="_po-",H="_3e-t",I=null,J=null,K=null;k=b("DOM").scry(j,"._3e-u");k=k.length?k[0]:null;if(k)if(w){I=(f=b("DOM")).scry(y,"._k7m")[0];J=f.scry(y,"._3ekx")[0];u=b("JSXDOM").input({name:"attachment[params][images][0]",type:"hidden"});f.appendContent(m,u);u.value=t[0][0];K=b("JSXDOM").input({name:"composer_metrics[image_selected]",type:"hidden",value:"0"});f.appendContent(m,K);d=b("Parent").bySelector(m,"._9u");i=f.scry(d,"._9s");i=i.length?i[0]:null;b("CSS").hasClass(y,C)&&(this.addCSSClass(i,G),this.addCSSClass(k,H));l=b("Event").listen(k,"click",function(){__p&&__p();b("DOM").scry(j,"._6ks").forEach(function(a){b("DOM").remove(a)});this.addCSSClass(y,"_6m4");this.addCSSClass(y,E);this.removeCSSClass(y,s);this.removeCSSClass(y,C);b("DOM").remove(k);var a=b("DOM").scry(j,"._146d")[0];this.addCSSClass(a,"hidden_elem");u.value="";b("Style").set(i,"top","6px");if(o){a=b("DOM").scry(o,"._5cy7")[0];a&&b("DOM").setContent(a,r)}b("LitestandShareAttachment").init(j)}.bind(this))}else b("DOM").remove(k);var L=b("DOM").scry(j,"._146d")[0];if(w<=1)this.addCSSClass(L,"hidden_elem");else{this.addCSSClass(L,"UIThumbPagerControl_First");a=b("DOM").scry(j,".UIThumbPagerControl_Button_Left")[0];c=b("DOM").scry(j,".UIThumbPagerControl_Button_Right")[0];var M={Right:0,Left:1},N=function(a){__p&&__p();var c=b("DOM").scry(j,"._6ks")[n];this.addCSSClass(c,"hidden_elem");a==M.Left?n--:a==M.Right&&n++;c=b("DOM").scry(j,"._6ks")[n];t[n][1]?(this.removeCSSClass(y,s),this.removeCSSClass(y,E),this.addCSSClass(y,C),this.addCSSClass(i,G),this.addCSSClass(k,H)):t[n][2]?(this.addCSSClass(y,s),this.addCSSClass(y,E),this.removeCSSClass(y,C),this.removeCSSClass(i,G),this.removeCSSClass(k,H)):(this.removeCSSClass(y,s),this.addCSSClass(y,E),this.removeCSSClass(y,C),this.removeCSSClass(i,G),this.removeCSSClass(k,H));this.removeCSSClass(c,"hidden_elem");b("DOM").remove(J);b("DOM").remove(I);b("DOM").appendContent(g,I);b("CSS").hasClass(y,C)?b("DOM").appendContent(g,J):b("DOM").appendContent(h,J);if(o){a=b("DOM").scry(o,"._5cy7")[0];a&&b("DOM").setContent(a,r)}b("LitestandShareAttachment").init(j);u.value=t[n][0];K.value=n;n===0?(this.addCSSClass(L,"UIThumbPagerControl_First"),this.removeCSSClass(L,"UIThumbPagerControl_Last")):n+1===w?(this.addCSSClass(L,"UIThumbPagerControl_Last"),this.removeCSSClass(L,"UIThumbPagerControl_First")):(this.removeCSSClass(L,"UIThumbPagerControl_First"),this.removeCSSClass(L,"UIThumbPagerControl_Last"))}.bind(this);v=b("Event").listen(a,"click",function(){n>0&&N(M.Left)});x=b("Event").listen(c,"click",function(){n+1<w&&N(M.Right)})}z=b("Event").listen(B,"click",function(){if(!A){var a=this.titleOnChange;this.clickHandler(B,a,F);A=!0}}.bind(this));o&&(p=b("Event").listen(o,"click",function(){if(!q){var a=this.descriptionOnChange;this.clickHandler(o,a,D);q=!0}}.bind(this)));b("Run").onLeave(function(){p&&p.remove(),z&&z.remove(),v&&v.remove(),x&&x.remove(),l&&l.remove()})},clickHandler:function(a,c,d){__p&&__p();var e=b("DOM").scry(a,"._5cy7")[0];s=b("JSXDOM").textarea({maxlength:d,value:e.firstChild.nodeValue});if(b("CSS").matchesSelector(a,"._6m7")){d=Math.min(b("LitestandShareAttachment").getNumDescriptionLines(j)*C,E);b("Style").set(s,"height",d+"px")}b("CSS").matchesSelector(y,"._59ap")||b("CSS").matchesSelector(y,"._6m4")?this.addCSSClass(s,"_1r8i"):this.addCSSClass(s,"_4xe4");s.onblur=this.onBlur;s.onchange=c;b("DOM").replace(e,s);s.focus();s.select()},onBlur:function(){var a=b("JSXDOM").span({"class":"_5cy7"},s.value);b("DOM").insertBefore(s,a);b("DOM").remove(s);b("LitestandShareAttachment").init(j);q=!1;A=!1},titleOnChange:function(){var a=b("DOM").scry(m,'input[name="attachment[params][title]"]')[0];a||(a=b("JSXDOM").input({name:"attachment[params][title]",type:"hidden"}),b("DOM").appendContent(m,a));a.value=s.value;a=b("DOM").scry(m,'input[name="xc_share_title"]');a.length&&(a[0].value=s.value)},descriptionOnChange:function(){var a=b("DOM").scry(m,'input[name="attachment[params][summary]"]')[0];a||(a=b("JSXDOM").input({name:"attachment[params][summary]",type:"hidden"}),b("DOM").appendContent(m,a));a.value=s.value;r=s.value;a=b("DOM").scry(m,'input[name="xc_share_summary"]');a.length&&(a[0].value=s.value)},addCSSClass:function(a,c){a&&b("CSS").addClass(a,c)},removeCSSClass:function(a,c){a&&b("CSS").removeClass(a,c)}};e.exports=d}),null);
__d("ReactComposerScrapedAttachmentBootstrapper",["ReactComposerScrapedAttachmentActions","ReactComposerScrapedAttachmentStore"],(function(a,b,c,d,e,f){a={bootstrap:function(a,c,d,e){b("ReactComposerScrapedAttachmentActions").setScrapedAttachment(a,c.markup,c.attachmentConfig,d,e,!!c.hasDisputedWarning,c.breakingNewsConfig);if(b("ReactComposerScrapedAttachmentStore").getMarkup(a)){b("ReactComposerScrapedAttachmentActions").clearSpinner(a);return}},clearScrapedSpinner:function(a){b("ReactComposerScrapedAttachmentActions").clearScrapedAttachment(a)}};e.exports=a}),null);
__d("ComposerPhotoSorter",["Arbiter","CSS","DOM","Rect","SortableGroup"],(function(a,b,c,d,e,f){__p&&__p();a={init:function(a,c){this._container=a;this._noDragDuringUploading=c;this._reset();this._update();c=this._update.bind(this);b("Arbiter").subscribe("multi-upload/images-added/"+a.id,c);b("Arbiter").subscribe("multi-upload/image-removed/"+a.id,c)},_reset:function(){this._ids=[],this._sortableGroup=new(b("SortableGroup"))(),this._noDragDuringUploading&&(b("Arbiter").subscribe(["multi-upload/images-upload-start/"+this._container.id],this._sortableGroup.destroy.bind(this._sortableGroup)),b("Arbiter").subscribe(["set-bounding-box/"+this._container.id],this._setBoundingBox.bind(this))),b("CSS").removeClass(this._container,"fbVaultPhotoSorter")},_update:function(){__p&&__p();var a=b("DOM").scry(this._container,".fbVaultGridItem").filter(function(a){return!b("CSS").hasClass(a,"fbVaultEditableGridMoreLink")});if(a.length<2){this._ids.length>1&&(this._sortableGroup.destroy(),this._reset());return}b("CSS").addClass(this._container,"fbVaultPhotoSorter");a.forEach(function(a){var c=b("DOM").scry(a,'input[type="hidden"]')[0];c&&!this._ids.includes(c.value)&&(this._ids.push(c.value),this._sortableGroup.addSortable(c.value,a,null,this._container.id))}.bind(this));this._sortableGroup.setBoundingBox(new(b("Rect"))(this._container))},_setBoundingBox:function(a,b){this._sortableGroup.setBoundingBox(b)}};e.exports=a}),null);
__d("VaultGridUploadItem",[],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.$1=a}var b=a.prototype;b.getUploadInput=function(){return this.$1};return a}();e.exports=a}),null);